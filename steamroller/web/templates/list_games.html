{% extends "base.html" %}
{% block content %}
    {% if pagination %}
        {% if pagination.section > 1 %}
            <a href="/all2/{{ pagination.section - 1 }}">Previous</a>
        {% else %}
            Previous
        {% endif %}
        Page {{ pagination.section }} of {{ pagination.section_count }}. {{ pagination.game_count }} total games.
        {% if pagination.section < pagination.section_count %}
            <a href="/all2/{{ pagination.section + 1 }}">Next</a>
        {% else %}
            Next
        {% endif %}
        </br>
        {% if pagination.section_count > 1 and pagination.section_count <= 5 %}
            {% for link in pagination.links %}
                <a href="/all2/{{ link }}">{{ link }}</a>
            {% endfor %}
        {% endif %}
    {% endif %}

    {% for game in games %}
            <div id="middle"><p>
                <form action = "/change_game_preference" method = "post">

                    {% if game.is_new %}
                        {% set class = 'new_game' %}
                        {% set type = 'New game' %}
                        {% set operation = 'Remove' %}
                    {% else %}
                        {% set class = 'played_game' %}
                        {% set type = 'Played game' %}
                        {% set operation = 'Add' %}
                    {% endif %}

                    <div class="{{ class }}">
                        {% if game.img_logo_url != "" %}
                            <div style="float: left; height: 100%; border-right: inherit;">
                                <img src="http://media.steampowered.com/steamcommunity/public/images/apps/{{game.appid}}/{{game.img_logo_url}}.jpg" style="max-height: 100%;">
                            </div>
                        {% endif %}
                        <div style="float: left; height: 100%; text-align: center; padding:10px;">
                            {{ game.name }}
                        </div>

                        <div style="float: right; height: 100%; border-left: inherit">
                            <input type="text" name="game_id" value="{{ game.id }}" readonly hidden=True/>
                            <input type="text" name="game_name" value="{{ game.name }}" readonly hidden=True/>
                            <input type="submit" class="my_w3-btn" name="operation" value="{{ operation }}" style="height: 100%; width: 120px;" />
                        </div>
                        <div style="float: right; height: 100%; border-left: inherit; text-align: center; padding:10px; width: 120px;">
                            {{ type }}
                        </div>
                        {% if game.is_early_access %}
                            <div style="float: right; height: 100%; border-left: inherit; text-align: center; padding:10px; color: #f89406">
                                <strong>Early Access</strong>
                            </div>
                        {% endif %}
                    </div>
                </form>
            </p></div>
    {% endfor %}
{% endblock %}
